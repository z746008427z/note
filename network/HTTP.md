# HTTP

## 概述

### HTTP 协议

超文本传输协议（HyperText Transfer Protocol），用于从WWW服务器传输超文本到本地浏览器的传送协议。



### TCP/IP 协议

HTTP是基于TCP/IP 协议之上的。两台计算机之间的通信是通过 TCP/IP 协议在因特网上进行的。



## HTTP 原理

### 工作过程

一次 HTTP 操作称为一个事务。

1. **地址解析：**如用客户端浏览器请求这个页面，从中分解出协议名、主机名、端口、对象路径等部分。

   - 协议名：https
   - 主机名：github.com
   - 端口：“”
   - 对象路径：/7-xin/note
   - 需要域名系统 DNS 解析域名 github.com，得出主机的 IP 地址。

2. **封装 HTTP 请求数据包**

   ​		把以上部分结合本机自己的信息，封装成一个HTTP请求数据包。

3. **封装成 TCP 包，建立 TCP 连接（TCP 三次握手）**

   ​		HTTP工作开始之前，客户机（Web浏览器）首先要通过网络与服务器建立连接，该连接是通过TCP来完成的，该协议与IP协议共同构建Internet，即著名的TCP/IP协议族，因此Internet又被称作是TCP/IP网络。		HTTP是比TCP更高层次的应用层协议，根据规则，只有低层协议建立之后才能，才能进行更层协议的连接，因此，首先要建立TCP连接，一般TCP连接的端口号是80。

4. **客户机发送请求命令**

   ​		建立连接后，客户机发送一个请求给服务器，请求方式的格式为：统一资源标识符（URL）、协议版本号，后边是 MIME 信息包括请求修饰符、客户机信息和可内容。

5. **服务器响应**

   ​		服务器接到请求后，给予相应的响应信息，其格式为一个状态行，包括信息的协议版本号、一个成功或错误的代码，后边是 MIME 信息包括服务器信息、实体信息和可能的内容。

   ​		实体消息是服务器向浏览器发送头信息后，它会发送一个空白行来表示头信息的发送到此为结束，接着，它就以 Content-Type 应答头信息所描述的格式发送用户所请求的实际数据。

6. **服务器关闭 TCP 连接**

   ​		一般情况下，一旦 web 服务器向浏览器发送了请求数据，它就要关闭 TCP 连接，然后如果浏览器或者服务器在其头信息加入了这个请求头 Connection:keep-alive，TCP 连接在发送后将仍然保持打开状态，于是，浏览器可以继续通过相同的连接发送请求。保持连接节省了为每个请求建立新连接所需的时间，还节约了网络带宽。



## SSL 工作原理

​		SSL（Server socket layer）是一种保证网络两个节点进行安全通信的协议。SSL 和 TLS 建立在 TCP/IP 协议基础上。建立在 SSL 上的 HTTP 协议称为 HTTPS，默认端口 443。SSL 使用加密技术实现会话双方信息的安全传递。



### 加密类型

有两种基本的加解密算法类型：

#### 对称加密

​		密钥只有一个，加密解密为同一个密码，且加解密速度快，典型的对称加密算法有 DES、AES，RC5，3DES等。

​		对称加密主要问题是共享秘钥，除你的计算机（客户端）知道另外一台计算机（服务器）的私钥秘钥，否则无法对通信流进行加密解密。解决这个问题的方案非对称秘钥。

#### 非对称加密

​		使用两个秘钥：公共秘钥和私有秘钥。私有秘钥由一方密码保存（一般是服务器保存），另一方任何人都可以获得公共秘钥。



### 获取证书

> CA 认证过的公钥

1. **从权威机构购买证书**

   ​		安全证书由国际权威的证书机构(CA)，如 VeriSign 和 Thawte 颁发，它们保证了证书的可信性。一个安全证书只对一个 IP 有效，多个 IP 必需购买多个证书。

2. **创建自我签名的证书**

   ​		如果通信双方只关心数据在网络上的可以安全传输，并不需要对方进行身份验证，这种情况下，可以创建自多签名证书。这证书达不到身份认证的目的，但可以用于加密通信。



### SSL 握手

SSL 连接总是由客户端启动的。在SSL 会话开始时执行 SSL 握手。此握手产生会话的密码参数。

![image-20210126003127041](HTTP.assets/image-20210126003127041.png)



# 问题

### 1. HTTP 状态码

- 1xx 信息
- 2xx 成功
- 3xx 重定向
- 4xx 客户端错误
- 5xx 服务器错误

