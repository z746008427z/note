## 对象访问定位

​		对象头中包含了一个叫做 **类型指针** 的东西，即对象指向它的类元数据的指针，虚拟机通过这个指针来确定这个对象是哪个类的实例。但是，并不是所有的虚拟机都是这么去做的。不同的虚拟机关于这点有不同的实现，目前主流的方式可以分为 **句柄** 和 **直接指针** 。



#### 句柄

<img src="java 对象访问定位.assets/image-20201222222703888.png" alt="image-20201222222703888" style="zoom: 50%;" />

​		我们的堆中被划分出了一块单独的部分，叫做 **句柄池** ，句柄池的作用就像一个中转站，我们要查询位于 **堆** 内存中的 **对象实例数据** ，需要通过一次 **间接** 的索引去获取，而另一部分是指向 **方法区** 中的 **对象类型** 的指针。而此时 jvm 栈中的栈帧中的本地变量表中所存储的引用地址 **是这个对象所对应的句柄地址** ，而非对象本身的地址。

#### 直接指针访问

<img src="java 对象访问定位.assets/image-20201222222858117.png" alt="image-20201222222858117" style="zoom:50%;" />

​		**reference** 指针直接指向的就是对象实例数据，而对象实例数据中（对象头）包含了对象类型的数据指针，指向的是位于方法区中的对象类型数据。