# jvm 内存模型与结构

---

## jvm内存结构

![image-20201220013524397](jvm 内存模型与结构.assets/image-20201220013524397.png)

- **堆（Heap）**：线程共享。所有的对象实例以及数组都要在堆上分配。回收器主要管理的对象。
- **方法区（Method Area）**：线程共享。存储类信息、常量、静态变量、即时编译器编译后的代码。
- **方法栈（JVM Stack）**：线程私有。存储局部变量表、操作栈、动态链接、方法出口，对象指针。
- **本地方法栈（Native Method Stack）**：线程私有。为虚拟机使用到的Native 方法服务。如Java使用c或者c++编写的接口服务时，代码在此区运行。
- **程序计数器（Program Counter Register）**：线程私有。有些文章也翻译成PC寄存器（PC Register），同一个东西。它可以看作是当前线程所执行的字节码的行号指示器。指向下一条要执行的指令。

![image-20201220013709322](jvm 内存模型与结构.assets/image-20201220013709322.png)

#### 堆（Heap）

​		存放对象实例和数组。可以分为新生代和老年代。新生代又可以分为 Eden 空间、From Survivor 空间（s0）、To Survivor 空间（s1）。所有新生成的对象首先都是放在新生代的。

​		此区域是垃圾回收的主要操作区域。如果在堆中没有内存完成实例分配，并且堆也无法再扩展时，将会抛出OutOfMemoryError 异常。

##### 控制参数

- -Xms：设置堆的最小空间大小
- -Xmx：设置堆的最大空间大小
- -XX:NewSize：设置新生代最小空间大小
- -XX:MaxNewSize：设置新生代最大空间大小