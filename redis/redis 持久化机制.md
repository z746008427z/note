# 持久化机制

- RDB 持久化能够在指定时间间隔对你的数据进行快照存储。
- AOF 持久化记录每次对服务器写的操作，当服务器重启的时候会重新执行这些命令来恢复原始的数据，AOF 命令以 redis 协议追加保存每次写的操作到文件末尾。
- Redis 还**能对 AOF 进行重写**，使得 AOF 体积不至于过大。**可以同时开启两种持久化方式**，当 Redis 重启的时候会优先载入AOF文件来恢复原始数据。因为通常状况下 AOF 文件保存的要比 RDB 完整。



## RDB

RDB 持久化会生成 RDB 文件，该文件是一个压缩过的二进制文件，可以通过该文件还原快照时的数据库状态，即生成该 RDB 文件时的服务器数据。RDB 文件默认为当前工作目录下的 dump.rdb，可以根据配置文件中的 dbfilename 和 dir 设置 RDB 的文件名和文件位置。

```properties
# 设置 dump 的文件名
dbfilename dump.rdb

# 工作目录
# 上面的 dbfilename 只制定了文件名，但是他会写入到这个目录下。
dir ./
```

